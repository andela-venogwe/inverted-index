extends layout

block content
  md-sidenav.md-sidenav-left.md-whiteframe-z2(layout='column', md-component-id='left',  md-disable-backdrop, md-whiteframe='4')
    md-toolbar.md-hue-2
      h1.md-toolbar-tools All Uploaded Files
    md-list
      md-item(ng-repeat='item in menu')
        a
          md-item-content(md-ink-ripple='', layout='row', layout-align='start center')
            .inset
              ng-md-icon(icon='{{item.icon}}')
            .inset
              | {{item.title}}
            .inset
              md-button.md-raised.md-primary(id="{{item.title}}Get")
               | {{item.getindex}}
              md-button.md-raised.md-warn(id="{{item.title}}Create")
               | {{item.createindex}}
    md-content(layout-margin)
      md-button.md-accent(ng-click='toggleLeft()')
        | Close this Sidenav
  div(layout="column", layout-fill, role="main").relative
    md-button.md-fab.md-fab-bottom-right(aria-label='Upload', ng-click='showPrerenderedDialog($event)')
      ng-md-icon(icon='file_upload')
    md-toolbar(ng-show='!showSearch')
      .md-toolbar-tools
        h1
          | Inverted Index
        span(flex)
        md-button(aria-label='Search', ng-click='showSearch = !showSearch')
          ng-md-icon(icon='search')
        md-button(aria-label='Open Sidebar', ng-click='toggleLeft()')
          ng-md-icon(icon='more_vert')
      md-tabs.md-primary.ng-hide(md-stretch-tabs='', md-selected='data.selectedIndex', md-center-tabs="true")
        md-tab#tab1(aria-controls='tab1-content')
          | Index
    md-toolbar.md-hue-1(ng-show='showSearch')
      .md-toolbar-tools
        md-button(ng-click='showSearch = !showSearch', aria-label='Back')
          ng-md-icon(icon='arrow_back')
        h3(flex='10')
          | Back
        md-input-container(md-theme='input', flex='')
          label Â 
          input(ng-model='search.who', placeholder='search indexes')
        md-button(aria-label='Search', ng-click='showSearch = !showSearch')
          ng-md-icon(icon='search')
        md-button(aria-label='Open Settings', ng-click='toggleLeft()')
          ng-md-icon(icon='more_vert')
    md-content(flex='', md-scroll-y='')
      ui-view(layout='column', layout-fill='', layout-padding='')
        .inset(hide-sm='')
        ng-switch.tabpanel-container(on='data.selectedIndex')
          #tab1-content(role='tabpanel', aria-labelledby='tab1', ng-switch-when='0', md-swipe-left='next()', md-swipe-right='previous()', layout='row', layout-align='center center')
            md-card(flex-gt-sm='90', flex-gt-md='80')
              md-card-content
                h2(style='text-align: center') Index Table
                md-list
                  md-item(ng-repeat='item in activity | filter:search')
                    md-item-content
                      .md-tile-left.inset(hide-sm='')
                        user-avatar
                      .md-tile-content
                        h3 {{item.what}}
                        h4 {{item.who}}
                        p
                          | {{item.notes}}
                    md-divider(md-inset='', hide-sm='', ng-if='!$last')
                    md-divider(hide-gt-sm='', ng-if='!$last')
                  md-divider
                  md-item.inset(layout='')
                    md-button.md-primary(layout='', layout-align='start center', flex='')
                      svg(xmlns='http://www.w3.org/2000/svg', width='24', height='24', viewbox='0 0 24 24')
                        path(d='M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z')
                      |  More
          #tab2-content(role='tabpanel', aria-labelledby='tab2', ng-switch-when='1', md-swipe-left='next()', md-swipe-right='previous()', layout='row', layout-align='center center')
            md-card(flex-gt-sm='90', flex-gt-md='80')
              md-card-content
                h2(style='text-align: center') Search Index
                md-list
                  md-item(ng-repeat="item in activity | filter:search | orderBy:'-what'")
                    md-item-content
                      .md-tile-left.inset(hide-sm='')
                        user-avatar
                      .md-tile-content
                        h3 {{item.what}}
                        h4 {{item.who}}
                        p
                          | {{item.notes}}
                    md-divider(md-inset='', hide-sm='', ng-if='!$last')
                    md-divider(hide-gt-sm='', ng-if='!$last')
                  md-divider
                  md-item.inset(layout='')
                    md-button.md-primary(layout='', layout-align='start center', flex='')
                      ng-md-icon(icon="keyboard_backspace")
                      |  Prev
                    md-item.inset(layout='')
                    md-button.md-primary(layout='', layout-align='start center', flex)
                      svg(xmlns='http://www.w3.org/2000/svg', width='24', height='24', viewbox='0 0 24 24')
                        path(d='M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z')
                      |  Next
  div(style='visibility: hidden')
    #myDialog.md-dialog-container
      md-dialog(aria-label="Upload Form")
        md-content.md-padding
          md-button.md-primary.md-raised(type="button")
            label(for='files') SELECT YOUR JSON FILE(S)
          input#files(type='file', accept='.json', class="ng-hide" name='file', multiple='')
          #errorfile(style="color: #cc0000; margin-left: 10px;") this is not a JSON file or you have already uploaded this file (please rename file if you haven't uploaded it before.)
          #upload-progress
            .percent 0%